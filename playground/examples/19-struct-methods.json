{
  "order": 19,
  "title": "Struct Methods",
  "snippet": "Functions within structs",
  "description": "BPL supports object-oriented programming through struct methods. Methods are functions defined inside a struct body that operate on struct instances. The 'this' keyword refers to the current instance, allowing access to members. Methods can be called using dot notation (obj.method()) for direct instances or arrow notation (ptr->method()) for pointers. Methods provide encapsulation by grouping related functionality with data. Unlike some OOP languages, BPL methods are just syntactic sugar - they compile to regular functions with an implicit 'this' parameter. This example demonstrates method definition, the 'this' keyword, and calling methods on struct instances.",
  "code": [
    "extern printf(fmt: string, ...);",
    "",
    "struct Rectangle {",
    "    width: int,",
    "    height: int,",
    "    ",
    "    # Constructor method",
    "    frame new(w: int, h: int) ret Rectangle {",
    "        local r: Rectangle;",
    "        r.width = w;",
    "        r.height = h;",
    "        return r;",
    "    }",
    "    ",
    "    # Calculate area",
    "    frame area(this: Rectangle) ret int {",
    "        return this.width * this.height;",
    "    }",
    "    ",
    "    # Calculate perimeter",
    "    frame perimeter(this: Rectangle) ret int {",
    "        return 2 * (this.width + this.height);",
    "    }",
    "    ",
    "    # Check if square",
    "    frame isSquare(this: Rectangle) ret bool {",
    "        return this.width == this.height;",
    "    }",
    "    ",
    "    # Print info",
    "    frame print(this: Rectangle) {",
    "        printf(\"Rectangle: %dx%d\\n\", this.width, this.height);",
    "        printf(\"  Area: %d\\n\", this.area());",
    "        printf(\"  Perimeter: %d\\n\", this.perimeter());",
    "        if (this.isSquare()) {",
    "            printf(\"  This is a square!\\n\");",
    "        }",
    "    }",
    "}",
    "",
    "frame main() ret int {",
    "    # Create rectangles using constructor",
    "    local rect1: Rectangle;",
    "    local rect2: Rectangle;",
    "    ",
    "    rect1 = Rectangle.new(5, 10);",
    "    rect2 = Rectangle.new(7, 7);",
    "    ",
    "    # Use methods",
    "    printf(\"Rectangle 1:\\n\");",
    "    rect1.print();",
    "    ",
    "    printf(\"\\nRectangle 2:\\n\");",
    "    rect2.print();",
    "    ",
    "    # Direct method calls",
    "    printf(\"\\nDirect calculations:\\n\");",
    "    printf(\"Rect1 area: %d\\n\", rect1.area());",
    "    printf(\"Rect2 perimeter: %d\\n\", rect2.perimeter());",
    "    ",
    "    return 0;",
    "}"
  ]
}
