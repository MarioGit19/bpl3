{
  "order": 41,
  "title": "Generic Enums",
  "snippet": "Enums with type parameters like Option<T>",
  "description": "Generic enums use type parameters to create reusable algebraic data types. The classic example is Option<T> which represents an optional value - either Some(T) containing a value or None. Generic enums enable type-safe error handling (Result<T, E>), optional values, and generic containers. When constructing or matching generic enums, you must specify type arguments (e.g., Option<int>). The compiler performs monomorphization, generating specialized code for each concrete type used. This example demonstrates Option<T> with explicit type parameters in construction and pattern matching.",
  "code": [
    "# Generic enum for optional values",
    "enum Option<T> {",
    "    Some(T),",
    "    None,",
    "}",
    "",
    "extern printf(fmt: string, ...);",
    "",
    "frame findValue(search: int) ret Option<int> {",
    "    if (search > 0) {",
    "        return Option<int>.Some(search * 2);",
    "    } else {",
    "        return Option<int>.None;",
    "    }",
    "}",
    "",
    "frame main() ret int {",
    "    # Create Some value with explicit type",
    "    local hasValue: Option<int> = Option<int>.Some(42);",
    "    ",
    "    # Pattern match on generic enum",
    "    local result: int = match (hasValue) {",
    "        Option<int>.Some(v) => v,",
    "        Option<int>.None => 0,",
    "    };",
    "    printf(\"Result: %d\\n\", result);",
    "    ",
    "    # Create None variant",
    "    local noValue: Option<int> = Option<int>.None;",
    "    local defaulted: int = match (noValue) {",
    "        Option<int>.Some(v) => v,",
    "        Option<int>.None => 99,",
    "    };",
    "    printf(\"Default value: %d\\n\", defaulted);",
    "    ",
    "    # Call function returning Option",
    "    local found: Option<int> = findValue(10);",
    "    local foundVal: int = match (found) {",
    "        Option<int>.Some(v) => v,",
    "        Option<int>.None => 0,",
    "    };",
    "    printf(\"Found: %d\\n\", foundVal);",
    "    ",
    "    return 0;",
    "}"
  ]
}
