{
  "order": 44,
  "title": "Tuple Destructuring",
  "snippet": "Unpack tuples in declarations and patterns",
  "description": "Tuple destructuring allows unpacking multiple values from tuples in a single statement. Use destructuring in local declarations, function returns, and pattern matching. Swap values without a temporary variable using tuple assignment: (a, b) = (b, a). Functions can return multiple values as tuples. Destructuring makes code cleaner by avoiding temporary variables and index access. You can also destructure in match patterns to extract nested tuple values. This is especially useful for functions that need to return multiple related values like coordinates, results with metadata, or parsed data.",
  "code": [
    "extern printf(fmt: string, ...);",
    "",
    "# Return multiple values as a tuple",
    "frame divmod(a: int, b: int) ret (int, int) {",
    "    local quotient: int = a / b;",
    "    local remainder: int = a % b;",
    "    return (quotient, remainder);",
    "}",
    "",
    "# Return coordinates",
    "frame getPoint() ret (int, int, int) {",
    "    return (10, 20, 30);",
    "}",
    "",
    "# Nested tuple return",
    "frame getPersonInfo() ret (string, (int, int)) {",
    "    local name: string = \"Alice\";",
    "    local age: int = 25;",
    "    local score: int = 95;",
    "    return (name, (age, score));",
    "}",
    "",
    "frame main() ret int {",
    "    # Basic destructuring in declaration",
    "    local (q: int, r: int) = divmod(17, 5);",
    "    printf(\"17 / 5 = %d remainder %d\\n\", q, r);",
    "    ",
    "    # Destructure 3-tuple",
    "    local (x: int, y: int, z: int) = getPoint();",
    "    printf(\"Point: (%d, %d, %d)\\n\", x, y, z);",
    "    ",
    "    # Swap values using tuple assignment",
    "    local a: int = 100;",
    "    local b: int = 200;",
    "    printf(\"Before swap: a=%d, b=%d\\n\", a, b);",
    "    (a, b) = (b, a);",
    "    printf(\"After swap: a=%d, b=%d\\n\", a, b);",
    "    ",
    "    # Nested destructuring",
    "    local (name: string, (age: int, score: int)) = getPersonInfo();",
    "    printf(\"Name: %s, Age: %d, Score: %d\\n\", name, age, score);",
    "    ",
    "    # Multiple swap",
    "    local p: int = 1;",
    "    local q2: int = 2;",
    "    local r2: int = 3;",
    "    printf(\"Before: p=%d, q=%d, r=%d\\n\", p, q2, r2);",
    "    (p, q2, r2) = (r2, p, q2);  # Rotate values",
    "    printf(\"After rotate: p=%d, q=%d, r=%d\\n\", p, q2, r2);",
    "    ",
    "    return 0;",
    "}"
  ]
}
