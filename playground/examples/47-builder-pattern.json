{
  "order": 47,
  "title": "Builder Pattern",
  "snippet": "Method chaining for fluent APIs",
  "description": "The Builder pattern provides a fluent interface for constructing complex objects step by step. Methods return a pointer to 'this', enabling method chaining. This pattern is useful when objects have many optional parameters or require multi-step initialization. Builder methods validate inputs and maintain object invariants. The pattern separates construction from representation, making code more readable and maintainable. Use builders for configuration objects, complex data structures, or any type that benefits from gradual initialization.",
  "code": [
    "extern printf(fmt: string, ...);",
    "",
    "# HTTP request builder",
    "struct Request {",
    "    method: string,",
    "    url: string,",
    "    timeout: int,",
    "    retries: int,",
    "    ",
    "    # Constructor",
    "    frame new() ret Request {",
    "        local req: Request = Request {",
    "            method: \"GET\",",
    "            url: \"\",",
    "            timeout: 30,",
    "            retries: 0,",
    "        };",
    "        return req;",
    "    }",
    "    ",
    "    # Builder method - set method",
    "    frame withMethod(this: *Request, m: string) ret *Request {",
    "        this.method = m;",
    "        return this;",
    "    }",
    "    ",
    "    # Builder method - set URL",
    "    frame withUrl(this: *Request, u: string) ret *Request {",
    "        this.url = u;",
    "        return this;",
    "    }",
    "    ",
    "    # Builder method - set timeout",
    "    frame withTimeout(this: *Request, t: int) ret *Request {",
    "        this.timeout = t;",
    "        return this;",
    "    }",
    "    ",
    "    # Builder method - set retries",
    "    frame withRetries(this: *Request, r: int) ret *Request {",
    "        this.retries = r;",
    "        return this;",
    "    }",
    "    ",
    "    # Display the request",
    "    frame display(this: *Request) {",
    "        printf(\"Request:\\n\");",
    "        printf(\"  Method: %s\\n\", this.method);",
    "        printf(\"  URL: %s\\n\", this.url);",
    "        printf(\"  Timeout: %d seconds\\n\", this.timeout);",
    "        printf(\"  Retries: %d\\n\", this.retries);",
    "    }",
    "}",
    "",
    "frame main() ret int {",
    "    # Create request using builder pattern",
    "    local req1: Request = Request.new();",
    "    ",
    "    # Chain methods for fluent configuration",
    "    req1.withMethod(\"POST\")",
    "        .withUrl(\"api.example.com/users\")",
    "        .withTimeout(60)",
    "        .withRetries(3)",
    "        .display();",
    "    ",
    "    printf(\"\\n\");",
    "    ",
    "    # Another request with different config",
    "    local req2: Request = Request.new();",
    "    req2.withMethod(\"DELETE\")",
    "        .withUrl(\"api.example.com/users/123\")",
    "        .display();",
    "    ",
    "    return 0;",
    "}"
  ]
}
