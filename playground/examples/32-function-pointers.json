{
  "order": 32,
  "title": "Function Pointers",
  "snippet": "Store and call functions through pointers",
  "description": "Function pointers store the address of a function, enabling indirect function calls. Declaration syntax: ret_type (*pointer_name)(param_types). Common uses: callbacks (event handlers, iteration functions), strategy pattern (runtime algorithm selection), plugin systems, dispatch tables. Function pointers enable dynamic behavior without inheritance. They're fundamental to higher-order programming patterns. BPL uses monomorphization for generics, so function pointers to generic functions require concrete type instantiation. Assignment is simple: ptr = functionName (no & needed). Call through pointer: ptr(args). This example demonstrates function pointer declaration, assignment, and callback patterns.",
  "code": [
    "# Define a callback function signature",
    "type MathOperation = Func<int>(int, int);",
    "",
    "# Concrete implementations",
    "frame add_impl(a: int, b: int) ret int {",
    "    return a + b;",
    "}",
    "",
    "frame subtract_impl(a: int, b: int) ret int {",
    "    return a - b;",
    "}",
    "",
    "frame multiply_impl(a: int, b: int) ret int {",
    "    return a * b;",
    "}",
    "",
    "# Function that takes a function pointer as argument",
    "frame applyOperation(a: int, b: int, op: MathOperation) ret int {",
    "    return op(a, b);",
    "}",
    "",
    "extern printf(fmt: string, ...);",
    "",
    "frame main() ret int {",
    "    local a: int = 10;",
    "    local b: int = 5;",
    "    ",
    "    # Create function pointers",
    "    local add_fn: MathOperation = add_impl;",
    "    local sub_fn: MathOperation = subtract_impl;",
    "    local mul_fn: MathOperation = multiply_impl;",
    "    ",
    "    # Call functions through pointers",
    "    local result1: int = add_fn(a, b);",
    "    local result2: int = sub_fn(a, b);",
    "    local result3: int = mul_fn(a, b);",
    "    ",
    "    printf(\"%d + %d = %d\\n\", a, b, result1);",
    "    printf(\"%d - %d = %d\\n\", a, b, result2);",
    "    printf(\"%d * %d = %d\\n\", a, b, result3);",
    "    ",
    "    # Pass function pointer to another function",
    "    local result4: int = applyOperation(20, 4, add_fn);",
    "    local result5: int = applyOperation(20, 4, mul_fn);",
    "    ",
    "    printf(\"\\nUsing applyOperation:\\n\");",
    "    printf(\"Add 20 and 4: %d\\n\", result4);",
    "    printf(\"Multiply 20 and 4: %d\\n\", result5);",
    "    ",
    "    return 0;",
    "}"
  ]
}
