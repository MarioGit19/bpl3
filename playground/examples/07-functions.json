{
  "order": 7,
  "title": "Functions (Frames)",
  "snippet": "Define and call functions",
  "description": "Functions in BPL are declared using the 'frame' keyword. Functions can specify a return type with 'ret <type>'. If omitted, the return type is void. Parameters are typed and passed by value. Functions can return tuples for multiple values. Use generic type parameters for polymorphic functions. This example demonstrates function declaration, parameter passing, return values, tuple returns, recursion, and early returns.",
  "code": [
    "extern printf(fmt: string, ...);",
    "",
    "# Frame with parameters and return value",
    "frame add(a: int, b: int) ret int {",
    "    return a + b;",
    "}",
    "",
    "# Frame with no return value (void)",
    "frame greet(name: string) {",
    "    printf(\"Hello, %s!\\n\", name);",
    "}",
    "",
    "# Frame returning boolean",
    "frame isEven(n: int) ret bool {",
    "    return n % 2 == 0;",
    "}",
    "",
    "# Frame returning multiple values (tuple)",
    "frame minMax(a: int, b: int) ret (int, int) {",
    "    if (a < b) {",
    "        return (a, b);",
    "    }",
    "    return (b, a);",
    "}",
    "",
    "# Recursive frame",
    "frame factorial(n: int) ret int {",
    "    if (n <= 1) {",
    "        return 1;",
    "    }",
    "    return n * factorial(n - 1);",
    "}",
    "",
    "# Frame with early return",
    "frame safeDivide(a: int, b: int) ret int {",
    "    if (b == 0) {",
    "        return 0;  # Early return on error",
    "    }",
    "    return a / b;",
    "}",
    "",
    "frame main() ret int {",
    "    # Call frames",
    "    local sum: int = add(5, 3);",
    "    printf(\"5 + 3 = %d\\n\", sum);",
    "    ",
    "    greet(\"Alice\");",
    "    ",
    "    if (isEven(4)) {",
    "        printf(\"4 is even\\n\");",
    "    }",
    "    ",
    "    # Tuple return destructuring",
    "    local (min: int, max: int) = minMax(10, 5);",
    "    printf(\"min=%d, max=%d\\n\", min, max);",
    "    ",
    "    printf(\"5! = %d\\n\", factorial(5));",
    "    ",
    "    printf(\"10 / 2 = %d\\n\", safeDivide(10, 2));",
    "    printf(\"10 / 0 = %d\\n\", safeDivide(10, 0));",
    "    ",
    "    return 0;",
    "}"
  ]
}
