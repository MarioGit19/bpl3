{
  "order": 39,
  "title": "Nested Structs",
  "snippet": "Define structs within structs",
  "description": "Nested structs enable hierarchical data organization by embedding structs within other structs. This composition pattern models has-a relationships (a Person has an Address). Access nested members with chained operators: person.address.city. Nested structs are stored inline (part of the parent's memory), unlike pointers which reference separate allocations. Deep nesting can make code verbose - consider methods or helper functions. Nested structs are common in: complex data models (user profiles), scene graphs (3D transformations), protocol implementations (layered headers). This example demonstrates nested struct definition, initialization, and multi-level member access.",
  "code": "# Document with nested structures\nstruct Metadata {\n    author: string,\n    version: int,\n    createdYear: int,\n}\n\nstruct Content {\n    title: string,\n    body: string,\n    wordCount: int,\n}\n\nstruct Document {\n    meta: Metadata,\n    content: Content,\n}\n\nframe Document_new(author: string, title: string, body: string) ret Document {\n    local metadata: Metadata;\n    metadata.author = author;\n    metadata.version = 1;\n    metadata.createdYear = 2025;\n    \n    local content: Content;\n    content.title = title;\n    content.body = body;\n    content.wordCount = 42;\n    \n    local doc: Document;\n    doc.meta = metadata;\n    doc.content = content;\n    return doc;\n}\n\nframe Document_getInfo(this: Document) ret void {\n    printf(\"Document: %s\\n\", this.content.title);\n    printf(\"Author: %s\\n\", this.meta.author);\n    printf(\"Version: %d\\n\", this.meta.version);\n    printf(\"Created: %d\\n\", this.meta.createdYear);\n    printf(\"Words: %d\\n\", this.content.wordCount);\n}\n\nframe Document_updateVersion(this: *Document) ret void {\n    this.meta.version = this.meta.version + 1;\n    printf(\"Document updated to version %d\\n\", this.meta.version);\n}\n\n# Company structure\nstruct Address {\n    street: string,\n    city: string,\n    country: string,\n}\n\nstruct Employee {\n    name: string,\n    title: string,\n    salary: int,\n}\n\nstruct Company {\n    name: string,\n    address: Address,\n    ceo: Employee,\n}\n\nframe Company_new(name: string, ceo_name: string) ret Company {\n    local addr: Address;\n    addr.street = \"123 Business Ave\";\n    addr.city = \"Tech City\";\n    addr.country = \"USA\";\n    \n    local employee: Employee;\n    employee.name = ceo_name;\n    employee.title = \"Chief Executive Officer\";\n    employee.salary = 500000;\n    \n    local company: Company;\n    company.name = name;\n    company.address = addr;\n    company.ceo = employee;\n    return company;\n}\n\nframe Company_printInfo(this: Company) ret void {\n    printf(\"Company: %s\\n\", this.name);\n    printf(\"Address: %s, %s, %s\\n\", this.address.street, this.address.city, this.address.country);\n    printf(\"CEO: %s (%s)\\n\", this.ceo.name, this.ceo.title);\n}\n\nextern printf(fmt: string, ...);\n\nframe main() ret int {\n    printf(\"=== Nested Structs Example ===\\n\\n\");\n    \n    # Create and use a document\n    printf(\"Document Example:\\n\");\n    local doc: Document = Document_new(\"John Doe\", \"My Article\", \"This is the content...\");\n    Document_getInfo(doc);\n    Document_updateVersion(&doc);\n    \n    printf(\"\\nCompany Example:\\n\");\n    # Create and use a company\n    local company: Company = Company_new(\"TechCorp\", \"Alice Smith\");\n    Company_printInfo(company);\n    \n    printf(\"\\nAccessing nested fields directly:\\n\");\n    printf(\"CEO name: %s\\n\", company.ceo.name);\n    printf(\"City: %s\\n\", company.address.city);\n    printf(\"Document author: %s\\n\", doc.meta.author);\n    printf(\"Document title: %s\\n\", doc.content.title);\n    \n    return 0;\n}"
}
