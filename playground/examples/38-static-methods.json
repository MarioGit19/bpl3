{
  "order": 38,
  "title": "Static Methods and Variables",
  "snippet": "Class methods and static fields in structs",
  "description": "Static methods are associated with the struct type rather than instances. They don't have access to 'this' since they're not called on a specific instance. Use static methods for: factory functions (creating instances), utility functions related to the type, operations that don't need instance data. Static methods are called using the struct name: StructName.methodName() rather than instance.methodName(). They're useful for encapsulating related functionality within a type's namespace without requiring an object. This keeps related code together while being honest that the operation doesn't need instance state. This example shows static method definition and usage patterns.",
  "code": [
    "# Math utilities struct with static-style methods",
    "struct Math {",
    "}",
    "",
    "# Static-style method - no 'this' parameter",
    "frame Math_abs(n: int) ret int {",
    "    if (n < 0) {",
    "        return -n;",
    "    } else {",
    "        return n;",
    "    }",
    "}",
    "",
    "frame Math_max(a: int, b: int) ret int {",
    "    if (a > b) {",
    "        return a;",
    "    } else {",
    "        return b;",
    "    }",
    "}",
    "",
    "frame Math_min(a: int, b: int) ret int {",
    "    if (a < b) {",
    "        return a;",
    "    } else {",
    "        return b;",
    "    }",
    "}",
    "",
    "frame Math_clamp(value: int, minVal: int, maxVal: int) ret int {",
    "    local clamped: int = Math_max(value, minVal);",
    "    return Math_min(clamped, maxVal);",
    "}",
    "",
    "# Counter struct with instance methods",
    "struct Counter {",
    "    value: int,",
    "}",
    "",
    "# Instance method",
    "frame Counter_increment(this: *Counter) ret void {",
    "    this.value = this.value + 1;",
    "}",
    "",
    "frame Counter_get(this: Counter) ret int {",
    "    return this.value;",
    "}",
    "",
    "# Static-style factory function",
    "frame Counter_create(initial: int) ret Counter {",
    "    local counter: Counter;",
    "    counter.value = initial;",
    "    return counter;",
    "}",
    "",
    "extern printf(fmt: string, ...);",
    "",
    "frame main() ret int {",
    "    printf(\"=== Static Methods Example ===\\n\\n\");",
    "    ",
    "    # Call static-style methods from Math",
    "    printf(\"Static Math Methods:\\n\");",
    "    local abs_result: int = Math_abs(-42);",
    "    printf(\"abs(-42) = %d\\n\", abs_result);",
    "    ",
    "    local max_result: int = Math_max(10, 20);",
    "    printf(\"max(10, 20) = %d\\n\", max_result);",
    "    ",
    "    local min_result: int = Math_min(10, 20);",
    "    printf(\"min(10, 20) = %d\\n\", min_result);",
    "    ",
    "    local clamp_result: int = Math_clamp(150, 0, 100);",
    "    printf(\"clamp(150, 0, 100) = %d\\n\", clamp_result);",
    "    ",
    "    printf(\"\\nInstance Methods with Static Factory:\\n\");",
    "    ",
    "    # Create counter using static factory method",
    "    local counter1: Counter = Counter_create(0);",
    "    printf(\"Created counter1 with initial value: %d\\n\", Counter_get(counter1));",
    "    ",
    "    # Call instance methods",
    "    Counter_increment(&counter1);",
    "    Counter_increment(&counter1);",
    "    Counter_increment(&counter1);",
    "    printf(\"After 3 increments: %d\\n\", Counter_get(counter1));",
    "    ",
    "    # Create another counter",
    "    local counter2: Counter = Counter_create(100);",
    "    printf(\"\\nCreated counter2 with initial value: %d\\n\", Counter_get(counter2));",
    "    Counter_increment(&counter2);",
    "    printf(\"After 1 increment: %d\\n\", Counter_get(counter2));",
    "    ",
    "    printf(\"\\nCounters are independent instances\\n\");",
    "    printf(\"counter1 = %d, counter2 = %d\\n\", Counter_get(counter1), Counter_get(counter2));",
    "    ",
    "    return 0;",
    "}"
  ]
}
