{
  "order": 27,
  "title": "Generics - Structs",
  "snippet": "Generic struct with type parameters",
  "description": "Generic structs create reusable data structures that work with any type. Declare type parameters in angle brackets after the struct name: struct Box<T>. Each instantiation (Box<int>, Box<float>) creates a separate specialized type. Type parameters can be used for fields, method parameters, and return types within the struct. This enables type-safe containers like vectors, maps, and option types without code duplication. The compiler generates optimized code for each concrete type. Generic methods can have their own additional type parameters. This example demonstrates generic struct definition, instantiation with different types, and methods on generic structs.",
  "code": [
    "# Generic Pair struct holds two values of the same type",
    "struct Pair<T> {",
    "    first: T,",
    "    second: T,",
    "}",
    "",
    "# Generic constructor",
    "frame Pair_new<T>(a: T, b: T) ret Pair<T> {",
    "    local pair: Pair<T>;",
    "    pair.first = a;",
    "    pair.second = b;",
    "    return pair;",
    "}",
    "",
    "# Method to get the first element",
    "frame Pair_getFirst<T>(this: Pair<T>) ret T {",
    "    return this.first;",
    "}",
    "",
    "# Method to swap the pair",
    "frame Pair_swap<T>(this: Pair<T>) ret Pair<T> {",
    "    local swapped: Pair<T>;",
    "    swapped.first = this.second;",
    "    swapped.second = this.first;",
    "    return swapped;",
    "}",
    "",
    "extern printf(fmt: string, ...);",
    "",
    "frame main() ret int {",
    "    # Create a Pair of integers",
    "    local intPair: Pair<int> = Pair_new<int>(100, 200);",
    "    printf(\"Int Pair - First: %d, Second: %d\\n\", intPair.first, intPair.second);",
    "    ",
    "    # Create a Pair of floats",
    "    local floatPair: Pair<float> = Pair_new<float>(1.5, 2.5);",
    "    printf(\"Float Pair - First: %.1f, Second: %.1f\\n\", floatPair.first, floatPair.second);",
    "    ",
    "    # Swap the integer pair",
    "    local swapped: Pair<int> = Pair_swap<int>(intPair);",
    "    printf(\"Swapped Int Pair - First: %d, Second: %d\\n\", swapped.first, swapped.second);",
    "    ",
    "    return 0;",
    "}"
  ]
}
