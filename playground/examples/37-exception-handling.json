{
  "order": 37,
  "title": "Exception Handling",
  "snippet": "Try-catch error handling patterns",
  "description": "Learn patterns for error handling in BPL. While BPL doesn't have built-in exceptions like modern languages, you can implement error handling using return values and status types.",
  "code": "# Status constants for error handling\nglobal Status_SUCCESS: int = 0;\nglobal Status_ERROR_DIVISION_BY_ZERO: int = 2;\nglobal Status_ERROR_OUT_OF_BOUNDS: int = 3;\n\n# Result type containing both a value and a status\nstruct ResultInt {\n    value: int,\n    status: int,\n}\n\n# Safe division function that returns status\nframe safeDivide(a: int, b: int) ret ResultInt {\n    local result: ResultInt;\n    if (b == 0) {\n        result.value = 0;\n        result.status = Status_ERROR_DIVISION_BY_ZERO;\n        return result;\n    }\n    result.value = a / b;\n    result.status = Status_SUCCESS;\n    return result;\n}\n\n# Safe array access function\nframe safeArrayAccess(arr: *int, size: int, index: int) ret ResultInt {\n    local result: ResultInt;\n    if (index < 0 || index >= size) {\n        result.value = 0;\n        result.status = Status_ERROR_OUT_OF_BOUNDS;\n        return result;\n    }\n    result.value = *(arr + index);\n    result.status = Status_SUCCESS;\n    return result;\n}\n\nextern printf(fmt: string, ...);\n\nframe main() ret int {\n    printf(\"=== Error Handling Example ===\\n\\n\");\n    \n    # Example 1: Safe division\n    printf(\"Safe Division:\\n\");\n    local result1: ResultInt = safeDivide(10, 2);\n    if (result1.status == Status_SUCCESS) {\n        printf(\"10 / 2 = %d\\n\", result1.value);\n    } else {\n        printf(\"Division failed with status %d\\n\", result1.status);\n    }\n    \n    # Attempt division by zero\n    local result2: ResultInt = safeDivide(10, 0);\n    if (result2.status == Status_ERROR_DIVISION_BY_ZERO) {\n        printf(\"Error: Cannot divide by zero\\n\");\n    } else {\n        printf(\"10 / 0 = %d\\n\", result2.value);\n    }\n    \n    printf(\"\\nSafe Array Access:\\n\");\n    \n    # Create an array\n    local numbers: int[5] = [10, 20, 30, 40, 50];\n    local size: int = 5;\n    \n    # Safe access to valid index\n    local result3: ResultInt = safeArrayAccess(&numbers[0], size, 2);\n    if (result3.status == Status_SUCCESS) {\n        printf(\"numbers[2] = %d\\n\", result3.value);\n    }\n    \n    # Safe access to invalid index\n    local result4: ResultInt = safeArrayAccess(&numbers[0], size, 10);\n    if (result4.status == Status_ERROR_OUT_OF_BOUNDS) {\n        printf(\"Error: Index 10 out of bounds (array size: %d)\\n\", size);\n    }\n    \n    printf(\"\\nAll operations completed safely\\n\");\n    return 0;\n}"
}
